<!DOCTYPE html>
<html>
<head>
    <title>Business Card DOM Example 3</title>
    <script type="text/javascript">
    function createBizCards()
    {
        // get references to the data island and the array of business cards
		var xmlData = document.getElementById("xmldata1");
		var bizCards = xmlData.getElementsByTagName("BusinessCard");
    
    for (var i=0; i <bizCards.length; i++) {
      var currentCard = bizCards[i];
      var newCard = document.createElement("div");
      newCard.setAttribute("class", "BusinessCard");

      var newName = document.createElement("div");
      newName.setAttribute("class", "Name");
      var nameStr = document.createTextNode(currentCard.getElementsByTagName("Name")[0].firstChild.data);
      newName.appendChild(nameStr);
      newCard.appendChild(newName);

      var phones = currentCard.getElementsByTagName("phone");
      var newPhone;
      for (var j=0; j < phones.length; j++) {
        newPhone = document.createElement("div");
        newPhone.setAttribute("class", "phone");

        var labelStr = currentCard.getElementsByTagName("phone")[j].getAttribute("type") + ": ";
        var phoneStr = document.createTextNode(labelStr +
            currentCard.getElementsByTagName("phone"[j].firstChild.data);

        newPhone.appendChild(phoneStr);
        newCard.appendChild(newPhone);

      }

      var newEmail = document.createElement("div");
      newEmail.setAttribute("class", "email");
      var emailStr = document.createTextNode(currentCard.getElementsByTagName("email")[0].firstChild.data);
      newEmail.appendChild(emailStr);
      newCard.appendChild(newEmail);

      document.getElementsByTagName("body")[0].appendChild(newCard);
    }

    }
    
    window.addEventListener("load",createBizCards);
    </script>
    <link rel="stylesheet" href="businesscard.css" />
</head>
<body>
<xml id="xmldata1" style="display:none">
<BusinessCards>
	<BusinessCard>
		<Name>Joe Marini</Name>
		<email>joe@joe.com</email>
		<phone type="mobile">(415) 555-4567</phone>
		<phone type="work">(800) 555-9876</phone>
		<phone type="fax">(510) 555-1234</phone>
	</BusinessCard>
</BusinessCards>	
</xml>
</body>
</html>
